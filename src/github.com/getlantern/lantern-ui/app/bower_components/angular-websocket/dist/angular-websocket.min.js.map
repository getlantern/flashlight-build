{"version":3,"sources":["src/angular-websocket.js"],"names":["$WebSocketProvider","$rootScope","$q","$timeout","$websocketBackend","$WebSocket","url","protocols","options","isObject","isArray","undefined","this","ssl","test","scope","rootScopeFailover","useApplyAsync","_reconnectAttempts","reconnectAttempts","initialTimeout","maxTimeout","sendQueue","onOpenCallbacks","onMessageCallbacks","onErrorCallbacks","onCloseCallbacks","objectFreeze","_readyStateConstants","_connect","_setInternalState","prototype","CONNECTING","OPEN","CLOSING","CLOSED","RECONNECT_ABORTED","_reconnectableStatusCodes","safeDigest","autoApply","$$phase","$digest","bindToScope","self","$on","force","socket","readyState","create","onmessage","_onMessageHandler","bind","onopen","_onOpenHandler","onerror","_onErrorHandler","onclose","_onCloseHandler","fireQueue","length","data","shift","send","isString","message","JSON","stringify","deferred","resolve","notifyOpenCallbacks","event","i","call","notifyCloseCallbacks","notifyErrorCallbacks","onOpen","cb","push","onClose","onError","onMessage","callback","isFunction","Error","isDefined","filter","RegExp","fn","pattern","indexOf","code","reconnect","applyAsyncOrDigest","args","arraySlice","arguments","$applyAsync","apply","currentCallback","exec","close","bufferedAmount","cancelableify","promise","cancel","then","newPromise","reason","splice","reject","defer","_getBackoffDelay","attempt","R","Math","random","T","F","N","M","floor","min","pow","state","objectDefineProperty","_internalConnectionState","angular","forEach","pending","get","set","$WebSocketBackendProvider","$window","$log","Socket","ws","match","exports","require","Client","client","e","WebSocket","MozWebSocket","createWebSocketBackend","warn","noop","Object","freeze","defineProperty","Array","slice","elt","len","from","Number","ceil","Function","oThis","TypeError","aArgs","fToBind","FNOP","fBound","concat","module","factory","service"],"mappings":"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"}